<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      .switchOn {
        background-color: lightblue;
      }
      .blink {
      	-webkit-animation: blink 0.5s linear infinite alternate;
      	animation: blink 0.5s linear infinite alternate;
      }
      @-webkit-keyframes blink {
      	0% {opacity: 0;}
      	100% {opacity: 1;}
      }
      @keyframes blink {
      	0% {opacity: 0;}
      	100% {opacity: 1;}
      }
    </style>
    <title></title>
</head>
<body style="padding: 0;">
<button onclick="tag('b');" id="b" class="switchOff">bold</button>
<button onclick="tag('h1');" id="h1" class="switchOff">見出し</button>
<div onclick="document.getElementById('input').focus();" style="height: 100vh; width: 100%;">
<div id="content"><span class="blink">|</span></div>
<textarea onkeyup="update();" id="input" style="opacity: 0; width: 0;"></textarea>
</div>
<script>
    document.getElementById('input').focus();
    function update() {
        document.getElementById('content').innerHTML = document.getElementById('input').value.replace(/</g, '&lt').replace(/>/g, '&gt').replace(/​/g, '<').replace(/‌/g, '>').replace(/\n/g, '<br>') + '<span class="blink">|</span>';
    };
    function tag(name) {
        document.getElementById('input').value += '​' + name + '‌';
        document.getElementById('input').focus();
        document.getElementById('input').setSelectionRange(document.getElementById('input').value.length, document.getElementById('input').value.length);
        update();
        newname = '/' + name;
        newname = newname.replace('//', '');
        document.getElementById(name).setAttribute('id', newname);
        setClass = document.getElementById(newname).getAttribute('class').replace('Off', '') + 'On';
        setClass = setClass.replace('OnOn', 'Off');
        document.getElementById(newname).setAttribute('class', setClass);
        document.getElementById(newname).setAttribute('onclick', 'tag(\'' + newname + '\');');
    }
</script>

</body>

</html>